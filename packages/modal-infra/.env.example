# CodInspect Modal Infrastructure - Environment Variables
# Copy this file to .env and fill in the values for local testing
#
# For Modal deployment, secrets are configured via Modal CLI:
#   modal secret create llm-api-keys ANTHROPIC_API_KEY="..."
#   modal secret create github-app GITHUB_APP_ID="..." GITHUB_APP_PRIVATE_KEY="..." GITHUB_APP_INSTALLATION_ID="..."
#   modal secret create internal-api MODAL_API_SECRET="..." ALLOWED_CONTROL_PLANE_HOSTS="..."

# =============================================================================
# Control Plane URL (for test scripts)
# =============================================================================
# Your deployed Cloudflare Workers control plane URL
CONTROL_PLANE_URL=https://CodInspect-control-plane.<your-subdomain>.workers.dev

# =============================================================================
# LLM API Keys (configured as Modal secret "llm-api-keys")
# =============================================================================
# Anthropic API key for Claude
# From: https://console.anthropic.com/
ANTHROPIC_API_KEY=

# =============================================================================
# GitHub App Credentials (configured as Modal secret "github-app")
# =============================================================================
# Create at: https://github.com/settings/apps
# Convert private key to PKCS#8: openssl pkcs8 -topk8 -inform PEM -outform PEM -nocrypt -in key.pem -out key-pkcs8.pem
GITHUB_APP_ID=
GITHUB_APP_PRIVATE_KEY=
GITHUB_APP_INSTALLATION_ID=

# =============================================================================
# Internal API Secret (configured as Modal secret "internal-api")
# =============================================================================
# Shared secret for authenticating control plane -> Modal API calls
# Must match MODAL_API_SECRET in control-plane
# Generate with: openssl rand -hex 32
MODAL_API_SECRET=

# Allowed control plane hosts for URL validation (security)
# Comma-separated list of allowed hostnames (with optional ports)
# This prevents SSRF attacks by ensuring sandboxes only connect to your control plane
# Example: "CodInspect-control-plane-prod.myaccount.workers.dev,localhost:8787"
ALLOWED_CONTROL_PLANE_HOSTS=localhost:8787
